{extends 'calif/base.html'}
{block body}
<p><a href="{url 'Calif_Views_Maestro::actualizarMaestro', array ($maestro.codigo)}">Cambiar la información</a> de este profesor</p>
<table class="form" summary="">
	<tr>
		<th style="text-align: right">
		{if $user.login == $maestro.codigo}
		<a href="http://gravatar.com/emails/" title="Cambie su imagen en gravatar.com">
		{else}
		<a href="http://www.gravatar.com/avatar/{$maestro.user.email|md5}.jpg?s=400">
		{/if}<img src="http://www.gravatar.com/avatar/{$maestro.user.email|md5}.jpg?s=60" alt=" " /></a>
		</th>
	{if $user.login == $maestro.codigo}
		<td>Yo</td>
	{else}
		<td>{$maestro.apellido} {$maestro.nombre}</td>
	{/if}
	</tr>
	<tr>
		<th>Código:</th>
		<td>{$maestro.codigo}</td>
	</tr>
	<tr>
		<th>Categoría Asignatura:</th>
		<td>{$asignatura.descripcion}</td>
	</tr>
	{if $nombramiento != null}
	<tr>
		<th>Nombramiento:</th>
		<td>{$nombramiento.descripcion}</td>
	</tr>
	{/if}
	{if $maestro.tiempo != null}
		{if $maestro.tiempo == 't'}
			<tr><td></td><td>Tiempo completo</td></tr>
		{else}
			<tr><td></td><td>Medio tiempo</td></tr>
		{/if}
	{/if}
	<tr>
		<th>Última vez visto:</th>
		<td>{$maestro.user.last_login|dateago}</td>
	</tr>
</table>
{if $user.administrator}
<h3>Carga horaria</h3>
<table border="1"><tbody>
	{if $maestro.nombramiento != null}
	{assign $color = '#FFFFFF'}
	{if $carga['t'].horas > $maestro.maxTiempoCompleto ()}{assign $color = '#FFE428'}{/if}
	{if $carga['t'].horas < $maestro.maxTiempoCompleto ()}{assign $color = '#FF0000'}{/if}
	<tr><td>Carga en tiempo completo</td><td>{$carga['t'].horas}</td><td style="background-color:{$color}">Max: {$maestro.maxTiempoCompleto ()}</td></tr>
	{/if}
	{assign $color = '#FFFFFF'}
	{if $carga['a'].horas > $maestro.maxAsignatura ()}{assign $color = '#FFE428'}{/if}
	<tr><td>Carga en asignaturas</td><td>{$carga['a'].horas}</td><td style="background-color:{$color}">Max: {$maestro.maxAsignatura ()}</td></tr>
	<tr><td>Carga en honorifico</td><td colspan="2">{$carga['h'].horas}</td></tr>
</tbody></table>
{/if}
<h2>Grupos del profesor</h2>
{if $grupos}
	<table><thead><tr><th>NRC</th><th>Materia</th><th>Sección</th></tr></thead>
	<tbody>
	{foreach $grupos as $g}
		<tr><td>{$g.displaylinkednrc()|safe}</td><td>{$g.displaylinkedmateria()|safe}</td><td>{$g.displaylinkedseccion()|safe}</td></tr>
	{/foreach}
	</tbody></table>
{else}
	<p>Este profesor no tiene grupos activos</p>
{/if}
<h2>Horario del profesor</h2>
{if $calendario}
	<p>Vista para <a href="{url 'Calif_Views_Maestro::verHorario', array ($maestro.codigo)}">impresión</a></p>
	{$calendario.render()}
{else}
	<p>Este profesor no tiene grupos activos</p>
{/if}
{/block}
