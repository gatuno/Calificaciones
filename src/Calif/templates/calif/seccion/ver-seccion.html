{extends 'calif/base.html'}
{block body}
<h1>NRC {$seccion.nrc}</h1>

<p>De la materia <a href="{url 'Calif_Views_Materia::verMateria', array ($materia.clave)}">{$materia.clave} - {$materia.descripcion}</a> {$seccion.seccion}</p>
<p>Grupo del profesor <a href="{url 'Calif_Views_Maestro::verMaestro', array ($maestro.codigo)}">{$maestro.apellido} {$maestro.nombre}</a>. <a href="{url 'Calif_Views_Seccion::actualizarNrc', array ($seccion.nrc)}">Cambiar de profesor</a></p>
<p><a href="{url 'Calif_Views_Seccion::eliminarNrc', array ($seccion.nrc)}"><img src="{media '/img/edit-delete.png'}" alt="Eliminar sección" />Eliminar esta sección</a></p>
{if $user.isCoord}
	<h3>Oferta académica</h3>
	{if $seccion.asignacion}
		{coordperm 'puede_liberar', $user, $seccion.asignacion}
			<p>La sección está pedida para {$seccion.asignacion}.{if $puede_liberar}<a href="{url 'Calif_Views_Seccion::liberarNrc', array ($seccion.nrc)}">Liberar esta sección</a>.{/if}</p>
	{else}
		{foreach $materia.getCarrerasList as $carrera}
			{coordperm 'puede', $user, $carrera.clave}
			{if $puede}
				<p><a href="{url 'Calif_Views_Seccion::reclamarNrc', array ($seccion.nrc, $carrera.clave)}">Reclamar sección para {$carrera.clave}</a></p>
			{/if}
		{/foreach}
	{/if}
{/if}
<h2>Horarios de la sección</h2>
<p>Puede <a href="{url 'Calif_Views_Horario::agregarHora', array ($seccion.nrc)}">agregar una nueva hora</a> a esta sección</p>
{if $horarios}
	<table border="1">
	<thead><tr><th>Hora inicio</th><th>Hora fin</th><th>Días</th><th>Edificio</th><th>Aula</th><th>Acciones</th></tr></thead>
	<tbody>
	{foreach $horarios as $hora}
		<tr><td>{$hora.hora_inicio}</td>
		<td>{$hora.hora_fin}</td>
		<td>{$hora.displayDias()}</td>
		<td>{$hora.salon_edificio}</td>
		<td><a href="{url 'Calif_Views_Salon::verSalon', array ($hora->salon)}">{$hora.salon_aula}</a></td>
		<td>
		<a href="{url 'Calif_Views_Horario::eliminarHora', array ($seccion->nrc, $hora->id)}"><img src="{media '/img/edit-delete.png'}" alt="Eliminar" /></a>
		<a href="{url 'Calif_Views_Horario::actualizarHora', array ($seccion->nrc, $hora->id)}"><img src="{media '/img/document-properties.png'}" alt="Editar" /></a>
		</td></tr>
	{/foreach}
	</tbody></table>
{/if}
<p>FIXME: Mostrar las calificaciones</p>
{if $alumnos}
	<table>
		<thead><tr><th>Alumno</th></tr></thead>
		<tbody>
		{foreach $alumnos as $alumno}
			<tr><td>{$alumno.nombre} {$alumno.apellido}</td></tr>
		{/foreach}
		</tbody>
	</table>
{else}
<p>La sección no tiene alumnos</p>
{/if}
{/block}
